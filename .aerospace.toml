# -----------------------
# Startup
# -----------------------
after-startup-command = [
  'exec-and-forget /opt/homebrew/bin/borders --listen active_color=0xff88c0d0 inactive_color=0xff4c566a width=10.0'
]
start-at-login = false

# -----------------------
# Layout Normalization
# -----------------------
enable-normalization-flatten-containers = true
enable-normalization-opposite-orientation-for-nested-containers = true

# -----------------------
# Root container defaults
# -----------------------
accordion-padding = 30
default-root-container-layout = "tiles"        # tiles | accordion
default-root-container-orientation = "auto"    # horizontal | vertical | auto

# -----------------------
# Behavior
# -----------------------
on-focused-monitor-changed = ["move-mouse monitor-lazy-center"]
automatically-unhide-macos-hidden-apps = false

# -----------------------
# Window rules (games float)
# -----------------------
[[on-window-detected]]
if.window-title-regex-substring = '^A:'
run = ['layout floating']

# -----------------------
# Key mapping preset
# -----------------------
[key-mapping]
preset = "qwerty"

# -----------------------
# Gaps (space for SketchyBar)
# -----------------------
[gaps]
inner.horizontal = 10
inner.vertical   = 10
outer.left       = 10
outer.right      = 10
outer.bottom     = 10
outer.top        = 10   # reserve space for your bar

# -----------------------
# MAIN MODE KEYBINDINGS
# -----------------------
[mode.main.binding]

# Fokus bewegen (vim-style)
cmd-h = "focus left"
cmd-j = "focus down"
cmd-k = "focus up"
cmd-l = "focus right"

# Fenster verschieben
cmd-alt-h = "move left"
cmd-alt-j = "move down"
cmd-alt-k = "move up"
cmd-alt-l = "move right"

# Resize
cmd-u = "resize smart -80"
cmd-i = "resize smart +80"

# Layout toggles
cmd-o = "layout tiles horizontal vertical"
cmd-p = "layout accordion horizontal vertical"

# Floating workspace toggle
cmd-n = "layout floating tiling"

# Workspaces
cmd-1 = "workspace 1"
cmd-2 = "workspace 2"
cmd-3 = "workspace 3"
cmd-4 = "workspace 4"
cmd-5 = "workspace 5"

# Fenster verschieben auf Workspaces
cmd-alt-1 = "move-node-to-workspace 1"
cmd-alt-2 = "move-node-to-workspace 2"
cmd-alt-3 = "move-node-to-workspace 3"
cmd-alt-4 = "move-node-to-workspace 4"
cmd-alt-5 = "move-node-to-workspace 5"

# Layout Reset & Pseudo-Maximize
cmd-r = "flatten-workspace-tree"
cmd-x = "close-all-windows-but-current"

# -----------------------
# SERVICE MODE (optional)
# -----------------------
[mode.service.binding]
esc       = ["reload-config", "mode main"]
r         = ["flatten-workspace-tree", "mode main"]
f         = ["layout floating tiling", "mode main"]
backspace = ["close-all-windows-but-current", "mode main"]

